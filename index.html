class MainScene extends Phaser.Scene { constructor() { super("MainScene"); this.level = 1; this.score = 0; }

preload() {
    this.load.image("player", "https://examples.phaser.io/assets/sprites/phaser-dude.png");
    this.load.image("enemy", "https://examples.phaser.io/assets/sprites/ufo.png");
    this.load.image("background", "https://examples.phaser.io/assets/skies/space3.png");
}

create() {
    this.add.image(400, 300, "background").setScale(1.5);
    this.player = this.physics.add.sprite(400, 500, "player").setCollideWorldBounds(true);
    this.cursors = this.input.keyboard.createCursorKeys();
    
    this.enemies = this.physics.add.group();
    this.spawnEnemy();
    
    this.scoreText = this.add.text(10, 10, "Score: 0", { fontSize: "20px", fill: "#FFF" });
    this.levelText = this.add.text(10, 40, "Level: 1", { fontSize: "20px", fill: "#FFF" });
    
    this.physics.add.overlap(this.player, this.enemies, this.hitEnemy, null, this);
}

update() {
    if (this.cursors.left.isDown) {
        this.player.setVelocityX(-200);
    } else if (this.cursors.right.isDown) {
        this.player.setVelocityX(200);
    } else {
        this.player.setVelocityX(0);
    }
}

spawnEnemy() {
    let x = Phaser.Math.Between(50, 750);
    let enemy = this.enemies.create(x, 50, "enemy");
    enemy.setVelocityY(100 + this.level * 10);
    enemy.setCollideWorldBounds(false);
}

hitEnemy(player, enemy) {
    enemy.destroy();
    this.score += 10;
    this.scoreText.setText(`Score: ${this.score}`);
    if (this.score % 100 === 0) {
        this.levelUp();
    }
    this.spawnEnemy();
}

levelUp() {
    this.level += 1;
    this.levelText.setText(`Level: ${this.level}`);
}

}

const config = { type: Phaser.AUTO, width: 800, height: 600, physics: { default: "arcade" }, scene: MainScene };

const game = new Phaser.Game(config);
